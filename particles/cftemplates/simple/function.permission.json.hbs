{{#layout}}

  {{!-- Function --}}
  {{resource "function/execution_role" logicalId="FunctionExecutionRole" condition="ExecutionRoleIsEmpty"}}
  {{set "function" executionRole=(concat '{"Fn::If": ["' ExecutionRoleIsEmpty '",' (ref "FunctionExecutionRole") ',' (ref "ExecutionRole") ']}')}}

  {{parameter 'simple/permission/actions' logicalId="action"}}
  {{parameter 'simple/permission/principal' logicalId="principal"}}
  {{parameter 'simple/permission/source_account' logicalId="sourceAccount"}}
  {{parameter 'simple/permission/source_arn' logicalId="sourceARN"}}

  {{
    resource 'simple/permission' logicalId="Permission" action="action" principal="principal" sourceAccount="sourceAccount"
       sourceARN="sourceARN" functionLogicalId="Function"
   }}

{{/layout}}



