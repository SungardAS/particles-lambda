{{#layout}}



  {{!-- Function --}}
  {{resource "function/execution_role" logicalId="FunctionExecutionRole" condition="ExecutionRoleIsEmpty"}}
  {{set "function" executionRole=(concat '{"Fn::If": ["' ExecutionRoleIsEmpty '",' (ref "FunctionExecutionRole") ',' (ref "ExecutionRole") ']}')}}


  {{!-- Event Source --}}
  {{parameter 'simple/event_source/event_source_arn' logicalId="eventSourceARN"}}
  {{parameter 'simple/event_source/stream_starting_position' logicalId="streamStartingPosition"}}

  {{
    resource 'simple/event_source_mapping'
    logicalId="EventSourceMapping"
    eventSourceARN="eventSourceARN"
    streamStartingPosition="streamStartingPosition"
    functionLogicalId="Function"
  }}


{{/layout}}
